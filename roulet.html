<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BOZHEMAN ROULETTE</title>
  <link rel="stylesheet" href="roulette.css">
  <style>
    /* --- quick styles for new betting UI --- */
    .layout{display:flex;flex-wrap:wrap;justify-content:center;gap:12px;margin-top:24px;}
    .wheel-wrapper{flex:0 0 320px;}
    .bet-board{display:grid;grid-template-columns:repeat(3,48px);grid-auto-rows:48px;gap:4px;background:#111;padding:6px;border:2px solid crimson;border-radius:6px;}
    .bet-cell{display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:700;border:1px solid #333;border-radius:4px;color:#fff;position:relative;cursor:pointer;user-select:none;}
    .bet-cell.green{background:green;} .bet-cell.red{background:crimson;} .bet-cell.black{background:#000;}
    .chip{width:26px;height:26px;border-radius:50%;background:#ffd700;display:flex;align-items:center;justify-content:center;font-size:.7rem;color:#000;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;box-shadow:0 0 3px rgba(0,0,0,.6);}
    .chips-panel{display:flex;gap:8px;justify-content:center;margin:16px 0;flex-wrap:wrap;}
    .chip-btn{width:40px;height:40px;border-radius:50%;background:#ffd700;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.4);} .chip-btn.active{outline:3px solid #0f0;}
    @media(max-width:640px){.layout{flex-direction:column;align-items:center;}.bet-board{grid-template-columns:repeat(6,48px);}}
  </style>
</head>
<body>
  <div class="top-bar">
    <h1>ROULETTE OF BOZHEMAN</h1>
    <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">0</span> BMAN</div>
  </div>

  <!-- wheel + board -->
  <div class="layout">
    <div class="wheel-wrapper">
      <div class="pointer"></div>
      <div class="wheel" id="wheel"></div>
      <div class="number-display" id="result-display"></div>
      <div class="message" id="message"></div>
    </div>

    <div class="bet-board" id="bet-board"></div>
  </div>

  <!-- chips -->
  <div class="chips-panel" id="chips-panel"></div>

  <button id="spin-btn" style="margin-top:12px;">üé∞ –ö—Ä—É—Ç–∏—Ç—å</button>
  <button id="buy-access" style="display:none;margin-top:12px;" onclick="location.href='https://t.me/bozheman'">üíé –ö–£–ü–ò–¢–¨ –ü–†–û–•–û–î</button>

  <!-- history -->
  <div id="history-log" style="margin-top:16px;font-family:monospace;font-size:.85rem;"></div>

<script>
/******** CONFIG ********/
const CHIP_VALUES=[1,5,10,50,250];
const numbers=[...Array(37).keys()];
const colors=['green',...numbers.slice(1).map(n=>n%2===0?'black':'red')];
/******** STATE ********/
let balance=parseInt(localStorage.getItem('bman_balance')||'10');
let selectedChip=CHIP_VALUES[0];
let bets={}; // key:number , value: total stake
let isSpinning=false,currentRotation=0,spinCount=0,history=[];
/******** INIT DOM ********/
const wheelEl=document.getElementById('wheel');
const boardEl=document.getElementById('bet-board');
const chipsPanel=document.getElementById('chips-panel');
const spinBtn=document.getElementById('spin-btn');
/**** build wheel numbers ****/
const sectorAngle=360/37;
numbers.forEach((num,i)=>{
  const d=document.createElement('div');
  d.className='wheel-number';
  d.textContent=num;
  d.style.transform=`rotate(${i*sectorAngle}deg) translateY(-140px)`;
  d.style.color=colors[i];
  wheelEl.appendChild(d);
});
/**** build betting board ****/
numbers.forEach(num=>{
  const cell=document.createElement('div');
  cell.className=`bet-cell ${colors[num]}`;
  cell.textContent=num;
  cell.onclick=()=>placeChip(num,cell);
  boardEl.appendChild(cell);
});
/**** build chips panel ****/
CHIP_VALUES.forEach(v=>{
  const btn=document.createElement('div');
  btn.className='chip-btn';
  btn.textContent=v;
  if(v===selectedChip)btn.classList.add('active');
  btn.onclick=()=>{selectedChip=v;document.querySelectorAll('.chip-btn').forEach(b=>b.classList.remove('active'));btn.classList.add('active');};
  chipsPanel.appendChild(btn);
});
/********* FUNCTIONS *********/
function placeChip(num,cell){
  if(balance<selectedChip)return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤');
  balance-=selectedChip;updateBalance();
  bets[num]=(bets[num]||0)+selectedChip;
  // visual chip clone
  const chip=document.createElement('div');chip.className='chip';chip.textContent=selectedChip;cell.appendChild(chip);
}
function updateBalance(){document.getElementById('balance').textContent=balance;localStorage.setItem('bman_balance',balance);if(balance>=1000)document.getElementById('buy-access').style.display='inline-block';}
updateBalance();
function clearBoard(){bets={};document.querySelectorAll('.bet-cell .chip').forEach(c=>c.remove());}
spinBtn.onclick=spin;
function spin(){if(isSpinning)return;if(Object.keys(bets).length===0)return alert('–°–¥–µ–ª–∞–π —Å—Ç–∞–≤–∫—É!');isSpinning=true;spinCount++;
  const resultNum=Math.floor(Math.random()*37);
  const addRot=10*360;const stopAngle=(360-resultNum*sectorAngle+sectorAngle/2);
  currentRotation+=addRot+stopAngle;wheelEl.style.transition='transform 7s ease-in-out';wheelEl.style.transform=`rotate(${currentRotation}deg)`;
  setTimeout(()=>{
    const color=colors[resultNum];
    document.getElementById('result-display').textContent=`–í—ã–ø–∞–ª–æ: ${resultNum} (${color})`;
    let totalWin=0;
    Object.entries(bets).forEach(([num,stake])=>{if(parseInt(num)===resultNum)totalWin+=stake*36;});
    balance+=totalWin;updateBalance();
    document.getElementById('message').textContent=totalWin>0?`–¢—ã –≤—ã–∏–≥—Ä–∞–ª ${totalWin} BMAN!`:'–¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª. –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.';
    logHistory(resultNum,color,totalWin);
    clearBoard();isSpinning=false;},7000);
}
function logHistory(num,color,win){const log=`#${spinCount}: ${num} (${color}) ‚Äî ${win>0?'+ '+win:'0'} BMAN`;history.unshift(log);if(history.length>10)history.pop();document.getElementById('history-log').innerHTML=history.join('<br>');}
</script>
</body>
</html>