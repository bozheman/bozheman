<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BOZHEMAN ROULETTE</title>
  <link rel="stylesheet" href="roulette.css">
</head>
<body>
  <div class="top-bar">
    <h1>ROULETTE OF BOZHEMAN</h1>
    <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">0</span> BMAN</div>
  </div>

  <div class="roulette-container">
    <div class="wheel-wrapper">
      <div class="pointer"></div>
      <div class="wheel" id="wheel">
        <!-- Numbers dynamically injected here -->
      </div>
    </div>
    <div class="number-display" id="result-display"></div>
    <div class="message" id="message"></div>
    <button id="buy-access" onclick="window.location.href='https://t.me/bozheman';">üíé –ö–£–ü–ò–¢–¨ –ü–†–û–•–û–î</button>
  </div>

  <div class="bottom-bar">
    <div class="input-group">
      <input type="number" id="bet" placeholder="–°—Ç–∞–≤–∫–∞" min="1" />
      <input type="text" id="choice" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∞–≤–∫—É: b / r / g / 0-36 / x / xx" />
      <button onclick="spin()">üé∞ –ö—Ä—É—Ç–∏—Ç—å</button>
    </div>
  </div>
  <div class="hint">
    –ü–æ–¥—Å–∫–∞–∑–∫–∞ —Å—Ç–∞–≤–æ–∫: b ‚Äî —á—ë—Ä–Ω–æ–µ, r ‚Äî –∫—Ä–∞—Å–Ω–æ–µ, g ‚Äî –∑–µ–ª—ë–Ω–æ–µ, 0-36 ‚Äî —á–∏—Å–ª–æ, x ‚Äî –Ω–µ—á—ë—Ç–Ω–æ–µ, xx ‚Äî —á—ë—Ç–Ω–æ–µ
  </div>

  <!-- –£–ª—É—á—à–µ–Ω–∏—è -->
  <div class="extras">
    <div id="history-log"></div>
    <div id="jackpot-status"></div>
    <div id="mini-games"></div>
  </div>

  <script>
    let balance = 10;
    let isSpinning = false;
    let currentRotation = 0;
    let spinCount = 0;
    const history = [];

    updateBalance();

    function updateBalance() {
      document.getElementById('balance').textContent = balance;
      localStorage.setItem('bman_balance', balance);
      if (balance >= 1000) {
        document.getElementById('buy-access').style.display = 'inline-block';
      }
    }

    const numbers = Array.from({ length: 37 }, (_, i) => i);
    const colors = ['green', ...numbers.slice(1).map(n => n % 2 === 0 ? 'black' : 'red')];

    const wheel = document.getElementById('wheel');
    numbers.forEach((num, i) => {
      const div = document.createElement('div');
      div.className = 'wheel-number';
      div.textContent = num;
      div.style.transform = `rotate(${i * (360 / 37)}deg) translateY(-140px)`;
      div.style.color = colors[i];
      wheel.appendChild(div);
    });

    function logHistory(num, color, win, bet) {
      const log = `#${spinCount}: ${num} (${color}) ‚Äî ${win > 0 ? '+ ' + win : '- ' + bet} BMAN`;
      history.unshift(log);
      if (history.length > 10) history.pop();
      document.getElementById('history-log').innerHTML = history.map(h => `<div>${h}</div>`).join('');
    }

    function spin() {
      if (isSpinning) return;
      isSpinning = true;
      spinCount++;

      const bet = parseInt(document.getElementById('bet').value);
      const choice = document.getElementById('choice').value.trim().toLowerCase();
      if (isNaN(bet) || bet <= 0 || bet > balance) {
        alert('–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç–∞–≤–∫–∞');
        isSpinning = false;
        return;
      }

      balance -= bet;
      updateBalance();

      const resultNum = Math.floor(Math.random() * 37);
      const sectorAngle = 360 / 37;
      const additionalRotations = 10 * 360;
      const stopAngle = (360 - resultNum * sectorAngle + sectorAngle / 2);
      currentRotation += additionalRotations + stopAngle;

      wheel.style.transition = 'transform 7s ease-in-out';
      wheel.style.transform = `rotate(${currentRotation}deg)`;

      setTimeout(() => {
        const color = resultNum === 0 ? 'green' : resultNum % 2 === 0 ? 'black' : 'red';
        document.getElementById('result-display').textContent = `–í—ã–ø–∞–ª–æ: ${resultNum} (${color})`;

        let win = 0;
        if ((choice === 'b' && color === 'black') ||
            (choice === 'r' && color === 'red') ||
            (choice === 'g' && resultNum === 0) ||
            (choice === 'x' && resultNum % 2 === 1) ||
            (choice === 'xx' && resultNum !== 0 && resultNum % 2 === 0) ||
            (!isNaN(parseInt(choice)) && parseInt(choice) === resultNum)) {

          win = ['g'].includes(choice) ? bet * 14 :
                ['b', 'r', 'x', 'xx'].includes(choice) ? bet * 2 :
                bet * 36;
        }

        if (win > 0) {
          balance += win;
          document.getElementById('message').textContent = `–¢—ã –≤—ã–∏–≥—Ä–∞–ª ${win} BMAN!`;
        } else {
          document.getElementById('message').textContent = `–¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª. –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.`;
        }

        logHistory(resultNum, color, win, bet);
        updateBalance();
        isSpinning = false;
      }, 7000);
    }
  </script>
</body>
</html>
